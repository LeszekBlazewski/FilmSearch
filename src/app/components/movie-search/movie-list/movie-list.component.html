<ng-container [ngSwitch]="shouldDisplayList">
    <ng-container *ngSwitchCase="false">
        <h3>Fill in the above form to get information about given films !</h3>
    </ng-container>
    <ng-container *ngSwitchCase="true">
        <ng-container *ngIf="(moviesData$ | async) as moviesResponse; else loading">
            <ng-container
                *ngTemplateOutlet="moviesResponse.Response == 'True' ? displayList : errorResponse; context: {response: moviesResponse}">
            </ng-container>
        </ng-container>
    </ng-container>
</ng-container>

<ng-template #loading>
    <div fxLayout="column" fxLayoutAlign="center center" fxLayoutGap="20px">
        <div>
            <mat-spinner></mat-spinner>
        </div>
        <div class="mat-body-strong"> Loading movies...</div>
    </div>
</ng-template>


<ng-template #displayList let-response="response">

    <div fxLayout="column" fxLayoutGap="20px">
        <div class="mat-body">
            Total movies found: <span class="mat-body-strong">{{response.totalResults}}</span>
        </div>

        <mat-list fxFill>
            <mat-list-item *ngFor="let movie of response.Search">
                <app-movie-list-item [movieData]="movie"></app-movie-list-item>
            </mat-list-item>
        </mat-list>

        <div infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="1000" (scrolled)="onDownScroll()">
        </div>

        <div *ngIf="!allMoviesFetched">
            Loading more movies...
        </div>


        <div *ngIf="allMoviesFetched">
            End of database... That's all folks!
        </div>

    </div>
</ng-template>


<ng-template #errorResponse let-response="response">
    {{response.Error}}
</ng-template>